<!-- index.html -->

<!DOCTYPE html>
<html>
<head>
  <title>Consulta de base de datos</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <style>
    body{
      background-color: #F1F1E6;
    }
    table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}
    .Header
{
    background-color: #F27405;
    color: white;
    text-align: center;
    width: auto;   
    height: 100px ;
}

.Header h2{
    margin: 0;
    padding: 25px;
    font-size: 36px;
}

.dropbtn {
    background-color: #400000;
    color: white; 
    padding: 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
    margin-top: 25px;
    margin-left: 10px;
    width: 250px;
  }

  .dropbtn:hover, .dropbtn:focus {
    background-color: #400000;
  }

  .dropdown {
    position: relative;
    display: inline-block;
  }

  .dropdown-content {
    display: none;
    position: absolute;
    background-color: #f1f1f1;
    width: 250px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
    margin-left: 10px;

  }

  .dropdown-content button {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    border: none;
    text-align: center;
    width: 250px ;
  }

  .dropdown-content button:hover {background-color: #ddd;}

  .show {display:block;}
    </style>
</head>

<body>
  
  
  <div class = "Header">
    <h2> Bienvenidos al consultorio Naranja </h2>

  </div>

<div class="dropdown">

     <button onclick="myFunction()" class="dropbtn">Elije tu consulta</button>
  
    <div id="myDropdown" class="dropdown-content">
      <button id="Consulta1">Consulta 1 </button>
      <button id="empleado">Consultar empleados</button>
      <button id="curso">Consultar cursos</button>
      <button id="cursoPanama">Consultas Panamá</button>
      <button id="cursoHonduras">Consultas Honduras</button>
      <button id="cursoColV">Consultas Cursos Virtuales Col</button>
      <button id="cursoColP">Consultas Cursos Presenciales Col</button>
      <button id="mejoresProm">Consultas mejores promedios</button>
      <button id="CurIngles">Consultas Cantidad cursos en inglés</button>
      <button id="CurEspanol">Consultas Cantidad cursos en español</button>

    </div>
  </div>

  <table id="resultadosCortosTabla">
    <thead>
      <tr>

        <th></th>
        <th></th>

      </tr>
    </thead>
    <tbody></tbody>
  </table>

  
  <center>
    <table id="resultadosTabla">
      <thead>
        <tr>
  
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
  
        </tr>
      </thead>
      <tbody></tbody>
    </table>  
</center>

  <script>
    $('#Consulta1').click(() => {
      $.get('/consulta', (data) => {
        // Obtener una referencia a la tabla y el cuerpo de la tabla
        const tabla = $('#resultadosTabla');
        const cuerpoTabla = tabla.find('tbody');

        // Limpiar la tabla antes de agregar los nuevos datos
        cuerpoTabla.empty();
        // Agregar nombre a las columnas

        const fila = $('<tr>');
        const id_ciudad = $('<td>').text('id_ciudad');
        const nombre_ciu = $('<td>').text('nombre_ciu');
        const id_estado_ciu = $('<td>').text('id_estado_ciu');

// Agregar las columnas a la fila
        fila.append(id_ciudad, nombre_ciu, id_estado_ciu);
        cuerpoTabla.append(fila);

        // Iterar sobre los resultados y agregar cada fila a la tabla
        data.forEach((item) => {
          const fila = $('<tr>');
          const columnaID = $('<td>').text(item.id_ciudad);
          const columnaNombre = $('<td>').text(item.nombre_ciu);
          const columnaEmail = $('<td>').text(item.id_estado_ciu);

          fila.append(columnaID, columnaNombre, columnaEmail);
          cuerpoTabla.append(fila);
        });
      });
    });
    function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
  }
  
  // Close the dropdown menu if the user clicks outside of it
  window.onclick = function(event) {
    if (!event.target.matches('.dropbtn')) {
      var dropdowns = document.getElementsByClassName("dropdown-content");
      var i;
      for (i = 0; i < dropdowns.length; i++) {
        var openDropdown = dropdowns[i];
        if (openDropdown.classList.contains('show')) {
          openDropdown.classList.remove('show');
        }
      }
    }
  }

    $('#curso').click(() => {
      $.get('/cursos', (data) => {
        // Obtener una referencia a la tabla y el cuerpo de la tabla
        const tabla = $('#resultadosTabla');
        const cuerpoTabla = tabla.find('tbody');

        // Limpiar la tabla antes de agregar los nuevos datos
        cuerpoTabla.empty();
        // Agregar nombre a las columnas

        const fila = $('<tr>');
        const id = $('<td>').text('Id');
        const disponibilidad = $('<td>').text('Disponibilidad');
        const fechaC = $('<td>').text('Fecha creación');
        const fechaP = $('<td>').text('Fecha publicación');
        const duracion = $('<td>').text('Duracion');
        const origen = $('<td>').text('Origen');
        const idioma = $('<td>').text('Idioma');
        const contenido = $('<td>').text('Contenido');
        const tipo = $('<td>').text('Tipo');
        const costo = $('<td>').text('Costo');
        const encargado = $('<td>').text('Id encargado');
        const categoriaC = $('<td>').text('Id categroia');
        const experto = $('<td>').text('Experto');
        const titulo = $('<td>').text('Titulo');
        const descripcion = $('<td>').text('Descripción');
        const proveedor = $('<td>').text('Proveedor');
        const Proposito = $('<td>').text('Proposito Formacion');
        const areaCon = $('<td>').text('Área conocimiento');
        const tipoCont = $('<td>').text('Tipo Contenido');

// Agregar las columnas a la fila

        fila.append(id,disponibilidad, fechaC, fechaP, duracion, origen, idioma,contenido, tipo, costo,
        encargado, categoriaC, experto, titulo,  descripcion, proveedor, Proposito, areaCon, tipoCont);

        cuerpoTabla.append(fila);

        // Iterar sobre los resultados y agregar cada fila a la tabla
        data.forEach((item) => {

          const fila = $('<tr>');
          const columnaIDC = $('<td>').text(item.Id_Curso);
          const columnaDisp = $('<td>').text(item.Disponibilidad);
          const columnaFechaC = $('<td>').text(item.FechaCreacion);
          const columnaFechaPub = $('<td>').text(item.FechaPublicacion);
          const columnaDuracion = $('<td>').text(item.Duracion);
          const columnaOrigen = $('<td>').text(item.Origen);
          const columnaIdioma = $('<td>').text(item.Idioma);
          const columnaContenido = $('<td>').text(item.Contenido);
          const columnaTipoCur = $('<td>').text(item.Tipo_Cur);
          const columnaCosto = $('<td>').text(item.Costo);
          const columnaEncargado = $('<td>').text(item.Id_Encargado);
          const columnaCategoria = $('<td>').text(item.Id_Categoria_Cur);
          const columnaExperto = $('<td>').text(item.Experto);
          const columnaTitulo = $('<td>').text(item.Id_Titulo_Cur);
          const columnaDescripcion = $('<td>').text(item.Descripción_Cur);
          const columnaProveedor = $('<td>').text(item.proveedor_cur);
          const columnaProposito = $('<td>').text(item.proposito_formacion);
          const columnaAreaC = $('<td>').text(item.area_conocimiento);
          const columnaTipo = $('<td>').text(item.Tipo_Contenido);
          
          fila.append(columnaIDC,columnaDisp, columnaFechaC, columnaFechaPub,columnaDuracion,
          columnaOrigen, columnaIdioma, columnaContenido, columnaTipoCur, columnaCosto, columnaEncargado,
          columnaCategoria, columnaExperto, columnaTitulo, columnaDescripcion,  columnaProveedor, columnaProposito,
          columnaAreaC, columnaTipo);

          cuerpoTabla.append(fila);

        });
      });
    });

    $('#cursoPanama').click(() => {
      $.get('/cursosPanama', (data) => {
        // Obtener una referencia a la tabla y el cuerpo de la tabla
        const tabla = $('#resultadosTabla');
        const cuerpoTabla = tabla.find('tbody');

        // Limpiar la tabla antes de agregar los nuevos datos
        cuerpoTabla.empty();
        // Agregar nombre a las columnas

        const fila = $('<tr>');
        const idCurso = $('<td>').text('Id curso');
        const cantidadEmple = $('<td>').text('Cantidad de empleados');

// Agregar las columnas a la fila

        fila.append(idCurso , cantidadEmple);

        cuerpoTabla.append(fila);

        // Iterar sobre los resultados y agregar cada fila a la tabla
        data.forEach((item) => {

          const fila = $('<tr>');
          const columnaIDCur = $('<td>').text(item.id_curso);
          const columnaCantidadEm = $('<td>').text(item.cantidad_empleados);

          fila.append(columnaIDCur, columnaCantidadEm  );

          cuerpoTabla.append(fila);

        });
      });
    });

    $('#cursoHonduras').click(() => {
      $.get('/cursosHonduras', (data) => {
        // Obtener una referencia a la tabla y el cuerpo de la tabla
        const tabla = $('#resultadosTabla');
        const cuerpoTabla = tabla.find('tbody');

        // Limpiar la tabla antes de agregar los nuevos datos
        cuerpoTabla.empty();
        // Agregar nombre a las columnas

        const fila = $('<tr>');
        const idCursoH = $('<td>').text('Id curso');
        const cantidadEmpleH = $('<td>').text('Cantidad de empleados');

// Agregar las columnas a la fila

        fila.append(idCursoH , cantidadEmpleH);

        cuerpoTabla.append(fila);

        // Iterar sobre los resultados y agregar cada fila a la tabla
        data.forEach((item) => {

          const fila = $('<tr>');
          const columnaIDCurH = $('<td>').text(item.id_curso);
          const columnaCantidadEmH = $('<td>').text(item.cantidad_empleados);

          fila.append(columnaIDCurH, columnaCantidadEmH);

          cuerpoTabla.append(fila);

        });
      });
    });

    $('#cursoColV').click(() => {

      $.get('/cursosColombiaV', (data) => {
        // Obtener una referencia a la tabla y el cuerpo de la tabla
        const tabla = $('#resultadosTabla');
        const cuerpoTabla = tabla.find('tbody');

        // Limpiar la tabla antes de agregar los nuevos datos
        cuerpoTabla.empty();
        // Agregar nombre a las columnas

        const fila = $('<tr>');
        const idCursoCV = $('<td>').text('Id curso');
        const cantidadEmpleCV = $('<td>').text('Cantidad de empleados');

// Agregar las columnas a la fila

        fila.append(idCursoCV , cantidadEmpleCV );

        cuerpoTabla.append(fila);

        // Iterar sobre los resultados y agregar cada fila a la tabla
        data.forEach((item) => {

          const fila = $('<tr>');
          const columnaIDCurCV = $('<td>').text(item.id_curso);
          const columnaCantidadCV = $('<td>').text(item.cantidad_empleados);

          fila.append(columnaIDCurCV, columnaCantidadCV);

          cuerpoTabla.append(fila);

        });
      });
    });

    $('#cursoColP').click(() => {

      $.get('/cursosColombiaP', (data) => {
        // Obtener una referencia a la tabla y el cuerpo de la tabla
        const tabla = $('#resultadosTabla');
        const cuerpoTabla = tabla.find('tbody');

        // Limpiar la tabla antes de agregar los nuevos datos
        cuerpoTabla.empty();
        // Agregar nombre a las columnas

        const fila = $('<tr>');
        const idCursoCP = $('<td>').text('Id curso');
        const cantidadEmpleCP = $('<td>').text('Cantidad de empleados');

// Agregar las columnas a la fila

        fila.append(idCursoCP , cantidadEmpleCP );

        cuerpoTabla.append(fila);

        // Iterar sobre los resultados y agregar cada fila a la tabla
        data.forEach((item) => {

          const fila = $('<tr>');
          const columnaIDCurCP = $('<td>').text(item.id_curso);
          const columnaCantidadCP = $('<td>').text(item.cantidad_empleados);

          fila.append(columnaIDCurCP, columnaCantidadCP);

          cuerpoTabla.append(fila);

        });
      });
    });

     $('#mejoresProm').click(() => {

      $.get('/mejoresPromedios', (data) => {
        // Obtener una referencia a la tabla y el cuerpo de la tabla
        const tabla = $('#resultadosTabla');
        const cuerpoTabla = tabla.find('tbody');

        // Limpiar la tabla antes de agregar los nuevos datos
        cuerpoTabla.empty();
        // Agregar nombre a las columnas

        const fila = $('<tr>');
        const idEm = $('<td>').text('Id empleado');
        const nomEm = $('<td>').text('Nombre empleado');
        const ApellidoEm = $('<td>').text('Apellido empleado');
        const IdCur = $('<td>').text('Id curso');
        const Cal = $('<td>').text('Calificacion');
        

// Agregar las columnas a la fila

        fila.append(idEm, nomEm, ApellidoEm,IdCur,Cal );

        cuerpoTabla.append(fila);

        // Iterar sobre los resultados y agregar cada fila a la tabla
        data.forEach((item) => {

          const fila = $('<tr>');
          const columnaIDEm = $('<td>').text(item.Id_Empleado_E_C);
          const columnaNomEm = $('<td>').text(item.nombre_em);
          const columnaApellEm = $('<td>').text(item.apellido_em);
          const columnaIdCurso = $('<td>').text(item.Id_Curso_E_C);
          const columnaCal = $('<td>').text(item.calificacion);
          

          fila.append(columnaIDEm, columnaNomEm, columnaApellEm,columnaIdCurso,columnaCal);

          cuerpoTabla.append(fila);

        });
      });
    });


    //Vista para las consultas Cortas

    $('#CurIngles').click(() => {
      $.get('/cIngles', (data) => {
        // Obtener una referencia a la tabla y el cuerpo de la tabla
        const tabla = $('#resultadosCortosTabla');
        const cuerpoTabla = tabla.find('tbody');

        // Limpiar la tabla antes de agregar los nuevos datos
        cuerpoTabla.empty();
        // Agregar nombre a las columnas

        const fila = $('<tr>');
        const tituloCI = $('<td>').text('Cantidad de cursos en inglés');

// Agregar las columnas a la fila

        fila.append(tituloCI);

        cuerpoTabla.append(fila);

        // Iterar sobre los resultados y agregar cada fila a la tabla
        data.forEach((item) => {

          const fila = $('<tr>');
          const cantidadCI = $('<td>').text(item.Cantidad);

          fila.append(cantidadCI);

          cuerpoTabla.append(fila);

        });
      });
    });



    $('#CurEspanol').click(() => {
      $.get('/cEspanol', (data) => {
        // Obtener una referencia a la tabla y el cuerpo de la tabla
        const tabla = $('#resultadosCortosTabla');
        const cuerpoTabla = tabla.find('tbody');

        // Limpiar la tabla antes de agregar los nuevos datos
        cuerpoTabla.empty();
        // Agregar nombre a las columnas

        const fila = $('<tr>');
        const tituloCI = $('<td>').text('Cantidad de cursos en español');

// Agregar las columnas a la fila

        fila.append(tituloCI);

        cuerpoTabla.append(fila);

        // Iterar sobre los resultados y agregar cada fila a la tabla
        data.forEach((item) => {

          const fila = $('<tr>');
          const cantidadCI = $('<td>').text(item.Cantidad);

          fila.append(cantidadCI);

          cuerpoTabla.append(fila);

        });
      });
    });


  </script>
</body>
</html>